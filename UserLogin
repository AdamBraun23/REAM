import java.awt.*;
import java.awt.event.*;
import java.io.File;
import java.io.PrintWriter;
import java.util.Scanner;
import javax.swing.*;
import javax.swing.border.TitledBorder;

public class UserLogin extends JFrame implements ActionListener {
	JPanel panel1; 
	JLabel usernameL, passwordL, message;
	JTextField usernameT, passwordT;
    JButton login, add, enter;
    String stru, strp;
    
    UserLogin() {
      usernameL = new JLabel("User Name :");
      usernameT = new JTextField();
      stru = usernameT.getText().toString();
      passwordL = new JLabel("Password :");
      passwordT = new JTextField();
      strp = passwordT.getText().toString();
      login = new JButton("LOGIN");
      login.addActionListener(this);
      add= new JButton("Create Account");
      add.addActionListener(this);
  	  enter= new JButton("Enter Application");
  	  enter.addActionListener(this);
  	  panel1 = new JPanel(new BorderLayout()); 
  	  panel1.setLayout((LayoutManager) new BoxLayout(panel1, BoxLayout.Y_AXIS));
      
      panel1.add(usernameL);
      panel1.add(usernameT);
      panel1.add(passwordL);
      panel1.add(passwordT);
      message = new JLabel();
      panel1.add(message);
      panel1.add(login);
      panel1.add(add);
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  	  JFrame frame = new JFrame();
	  frame.add(panel1);
	  frame.setSize(325,225);
	  frame.setTitle("Login to your Movie Screen"); 
	  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	  frame.setVisible(true);
   }
   
   public void writeContactsToFile()
	{
		PrintWriter write = null;
		File users= null;
		
		try
		{
			users= new File("users.txt");
			write = new PrintWriter(users);
			write.print(usernameT.getText() + ", " + passwordT.getText());
			
		}
		catch(Exception e) 
		{
			System.out.print(e);
		}
		finally 
		{
			write.close();
		}
	}
    
    public void actionPerformed(ActionEvent event) 
	{ 
		if(event.getActionCommand().equals("Create Account")) 
		{
			writeContactsToFile();
			String userName = usernameT.getText();
	    	String pass = passwordT.getText();
			User u1= new User(userName, pass);

			message.setText("Welcome " + userName + ", you are now in the System!");
			
			panel1.remove(add);
		    panel1.remove(login);
		    panel1.add(enter);
		}
		
		if(event.getActionCommand().equals("LOGIN"))
		{
			writeContactsToFile();
			String userName = usernameT.getText();
	    	String pass = passwordT.getText();
			User u1= new User(userName, pass);
		    
		    message.setText("Hello " + userName);
		    
		    panel1.remove(add);
		    panel1.remove(login);
		    panel1.add(enter);
		} 
		
		if(event.getActionCommand().equals("Enter Application")) 
		{
			new MovieAppInterface();
	    	
		}
	}
	
   public static void main(String[] args) {
	   new UserLogin();
   }
}
